<div class="ngo-dashboard-container">
  <div class="header-section">
    <h1>NGO Dashboard</h1>
    <button mat-raised-button color="primary" (click)="createNewDonation()">
      <mat-icon>add</mat-icon>
      Create Donation
    </button>
  </div>

  <div class="stats-section">
    <mat-card class="stat-card">
      <mat-card-header>
        <mat-card-title>Total Donations</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.totalDonations }}</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <mat-card-title>Pending</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.pendingDonations }}</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <mat-card-title>Confirmed</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.confirmedDonations }}</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-header>
        <mat-card-title>Completed</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stat-value">{{ stats.completedDonations }}</div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="donations-section">
    <h2>My Donations</h2>
    
    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner></mat-spinner>
      <p>Loading donations...</p>
    </div>

    <div *ngIf="!isLoading && myDonations.length === 0" class="empty-state">
      <mat-icon>inventory_2</mat-icon>
      <p>No donations created yet. Create your first donation request!</p>
      <button mat-raised-button color="primary" (click)="createNewDonation()">
        Create Donation
      </button>
    </div>

    <mat-card *ngFor="let donation of myDonations" class="donation-card">
      <mat-card-header>
        <div mat-card-avatar class="donation-avatar">
          <mat-icon>{{ getDonationTypeIcon(donation.donation_type) }}</mat-icon>
        </div>
        <mat-card-title>{{ donation.description }}</mat-card-title>
        <mat-card-subtitle>{{ donation.location }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="donation-details">
          <p><strong>Type:</strong> {{ donation.donation_type }}</p>
          <p><strong>Quantity/Amount:</strong> {{ donation.quantity_or_amount }}</p>
          <p><strong>Pickup Date:</strong> {{ formatDate(donation.pickup_date_time) }}</p>
          <p><strong>Status:</strong> 
            <mat-chip [color]="getStatusColor(donation.status)">
              {{ donation.status }}
            </mat-chip>
          </p>
          <p *ngIf="donation.priority"><strong>Priority:</strong> 
            <mat-chip [color]="getPriorityColor(donation.priority)">
              {{ donation.priority }}
            </mat-chip>
          </p>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="viewDonationDetails(donation.id)">
          View Details
        </button>
        <button mat-button color="accent" (click)="editDonation(donation.id)">
          Edit
        </button>
        <button mat-button color="warn" (click)="cancelDonation(donation.id)">
          Cancel
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
